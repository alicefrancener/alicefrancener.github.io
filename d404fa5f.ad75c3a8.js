(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{102:function(e,n,a){"use strict";a.d(n,"a",(function(){return d})),a.d(n,"b",(function(){return p}));var r=a(0),t=a.n(r);function o(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function c(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?c(Object(a),!0).forEach((function(n){o(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function l(e,n){if(null==e)return{};var a,r,t=function(e,n){if(null==e)return{};var a,r,t={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],n.indexOf(a)>=0||(t[a]=e[a]);return t}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var s=t.a.createContext({}),b=function(e){var n=t.a.useContext(s),a=n;return e&&(a="function"==typeof e?e(n):i(i({},n),e)),a},d=function(e){var n=b(e.components);return t.a.createElement(s.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return t.a.createElement(t.a.Fragment,{},n)}},m=t.a.forwardRef((function(e,n){var a=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=b(a),m=r,p=d["".concat(c,".").concat(m)]||d[m]||u[m]||o;return a?t.a.createElement(p,i(i({ref:n},s),{},{components:a})):t.a.createElement(p,i({ref:n},s))}));function p(e,n){var a=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=a.length,c=new Array(o);c[0]=m;var i={};for(var l in n)hasOwnProperty.call(n,l)&&(i[l]=n[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,c[1]=i;for(var s=2;s<o;s++)c[s]=a[s];return t.a.createElement.apply(null,c)}return t.a.createElement.apply(null,a)}m.displayName="MDXCreateElement"},93:function(e,n,a){"use strict";a.r(n),a.d(n,"frontMatter",(function(){return c})),a.d(n,"metadata",(function(){return i})),a.d(n,"toc",(function(){return l})),a.d(n,"default",(function(){return b}));var r=a(3),t=a(7),o=(a(0),a(102)),c={title:"MongoDB",id:"mongodb"},i={unversionedId:"mongodb",id:"mongodb",isDocsHomePage:!1,title:"MongoDB",description:"Criar cole\xe7\xe3o, inserir e remover",source:"@site/docs/mongodb.md",slug:"/mongodb",permalink:"/docs/mongodb",editUrl:"https://github.com/alicefrancener/alicefrancener.github.io/edit/master/docs/mongodb.md",version:"current",sidebar:"someSidebar",previous:{title:"SQL Basics",permalink:"/docs/sql"}},l=[{value:"Criar cole\xe7\xe3o, inserir e remover",id:"criar-cole\xe7\xe3o-inserir-e-remover",children:[]},{value:"Consultar",id:"consultar",children:[]},{value:"Consultar com OR e IN",id:"consultar-com-or-e-in",children:[]},{value:"Update",id:"update",children:[]},{value:"Update array",id:"update-array",children:[]},{value:"Ordenar",id:"ordenar",children:[]},{value:"Buscar por dist\xe2ncia",id:"buscar-por-dist\xe2ncia",children:[]}],s={toc:l};function b(e){var n=e.components,a=Object(t.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},s,a,{components:n,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"criar-cole\xe7\xe3o-inserir-e-remover"},"Criar cole\xe7\xe3o, inserir e remover"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Operadores: ",Object(o.b)("a",{parentName:"li",href:"https://docs.mongodb.com/manual/reference/operator/query/"},"https://docs.mongodb.com/manual/reference/operator/query/"))),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-bash"},'# criar cole\xe7\xe3o\ndb.createCollection("alunos")\n\n# inserir registro\ndb.alunos.insert({\n       "nome" : "Felipe",\n       "data_nascimento" : new Date (1994,02,26),\n       "habilidades": [\n        {\n            "nome" : "ingl\xeas",\n            "n\xedvel" : "avan\xe7ado"\n        },\n        {\n            "nome" : "taekwondo",\n            "n\xedvel" : "b\xe1sico"\n        }\n    ]\n   })\n\n# remover registro\ndb.alunos.remove({\n  "_id" : ObjectId ("56cb0002b6d75ec12f75d3b5")\n  })\n\n')),Object(o.b)("h2",{id:"consultar"},"Consultar"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-bash"},'# listar registros (pretty - formatado)\ndb.alunos.find()\ndb.alunos.find().pretty()\ndb.alunos.find({nome: "Felipe"}).pretty()\ndb.alunos.find({"habilidades.nome": "ingl\xeas" }).pretty()\n')),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-bash"},'# encontrar maiores que ($gt: greater than)\ndb.alunos.find({\n  "notas": { $gt : 5}\n})\n')),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-bash"},'# encontrar s\xf3 um\ndb.alunos.findOne({\n  "notas": 5\n})\n\n# limitar os resultados\ndb.alunos.find().limit(3)\n\n')),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Refer\xeancia para comandos ",Object(o.b)("inlineCode",{parentName:"li"},"find"),Object(o.b)("a",{parentName:"li",href:"https://docs.mongodb.com/manual/reference/method/db.collection.find/"},"https://docs.mongodb.com/manual/reference/method/db.collection.find/"))),Object(o.b)("h2",{id:"consultar-com-or-e-in"},"Consultar com OR e IN"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-bash"},'# listar alunos de um determinado curso OU outro\ndb.alunos.find({\n    $or : [\n        {"curso.nome" : "Sistemas de informa\xe7\xe3o"},\n        {"curso.nome" : "Engenharia Qu\xedmica"}\n    ]\n})\n\n# listar aluna com nome Daniela E de algum dos cursos\n db.alunos.find({\n     $or : [\n        {"curso.nome" : "Sistemas de informa\xe7\xe3o"},\n        {"curso.nome" : "Engenharia Qu\xedmica"},\n        {"curso.nome" : "Moda"}\n    ],\n    "nome" : "Daniela"\n })\n\n# listar alunos de uma lista de determinados cursos\n db.alunos.find({\n    "curso.nome" : {\n        $in : ["Sistemas de informa\xe7\xe3o", "Engenharia Qu\xedmica"]\n        }\n})\n')),Object(o.b)("h2",{id:"update"},"Update"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Se n\xe3o usar ",Object(o.b)("inlineCode",{parentName:"li"},"$set"),", documento inteiro \xe9 modificado")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-bash"},'# update primeiro documento que t\xeam determinado curso e update somente o campo curso\ndb.alunos.update(\n  {"curso.nome" : "Sistemas de informa\xe7\xe3o"},\n  { $set: {\n    "curso.nome": "Sistemas de informa\xe7\xe3o"\n  }}\n  )\n\n# update m\xfaltiplos documentos\ndb.alunos.update(\n  {"curso.nome" : "Sistemas de informa\xe7\xe3o"},\n  { $set: {\n    "curso.nome": "SISTEMAS DE INFORMA\xc7\xc3O"\n  },\n  {\n    multi: true\n  }}\n  )\n')),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Refer\xeancia para update\n",Object(o.b)("a",{parentName:"li",href:"https://docs.mongodb.com/manual/reference/operator/update/"},"https://docs.mongodb.com/manual/reference/operator/update/"))),Object(o.b)("h2",{id:"update-array"},"Update array"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"$push"),": inserir elemento no array",Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",{parentName:"pre",className:"language-bash"},'db.alunos.update(\n  {"_id" : ObjectId("56cb0002b6d75ec12f75d3b5")},\n  {\n      $push : {\n          notas : 8.5\n      }\n  }\n)\n'))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"$each"),": adicionar notas para array",Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",{parentName:"pre",className:"language-bash"},'db.alunos.update(\n  {"_id" : ObejctId("56cb0139b6d75ec12f75d3b6")},\n  {\n      $push : {\n          "notas" : {$each : [8.5, 3] }\n      }\n  }\n)\n')))),Object(o.b)("h2",{id:"ordenar"},"Ordenar"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-bash"},'# ordenar um campo ordem crescente\ndb.alunos.find().sort({"nome": 1})\n\n# ordenar em ordem decrescente\ndb.alunos.find().sort({"nome": -1})\n')),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Refer\xeancia para operadores update de array\n",Object(o.b)("a",{parentName:"li",href:"https://docs.mongodb.com/manual/reference/operator/update-array/"},"https://docs.mongodb.com/manual/reference/operator/update-array/"))),Object(o.b)("h2",{id:"buscar-por-dist\xe2ncia"},"Buscar por dist\xe2ncia"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Incluir informa\xe7\xf5es geoespaciais"),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"localiza\xe7\xe3o geogr\xe1fica no MongoDB necessita de dois valores que s\xe3o obrigat\xf3rios, o ",Object(o.b)("inlineCode",{parentName:"li"},"coordinates"),", que \xe9 latitude e longitude e o ",Object(o.b)("inlineCode",{parentName:"li"},"type")),Object(o.b)("li",{parentName:"ul"},"outras informa\xe7\xf5es, como pa\xeds e endere\xe7o, s\xe3o opcionais")),Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",{parentName:"pre",className:"language-bash"},'db.alunos.update(\n{ "_id" : ObjectId("56cb0139b6d75ec12f75d3b6") },\n{\n    $set : {\n    localizacao : {\n        endereco : "Rua Vergueiro, 3185",\n        cidade : "S\xe3o Paulo",\n        coordinates : [-23.588213, -46.632356],\n        type : "Point"\n        }\n    }\n}\n)\n'))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Criar \xedndice de busca"),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"createIndex()"),": nele passaremos o campo que criamos que possui as informa\xe7\xf5es ",Object(o.b)("inlineCode",{parentName:"li"},"coordinates")," e ",Object(o.b)("inlineCode",{parentName:"li"},"type"),". No exemplo, ",Object(o.b)("inlineCode",{parentName:"li"},"localizacao")),Object(o.b)("li",{parentName:"ul"},"no caso de um ",Object(o.b)("inlineCode",{parentName:"li"},'type: "Point"')," na terra, queremos a dist\xe2ncia de uma esfera 2D")),Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",{parentName:"pre",className:"language-bash"},'db.alunos.createIndex({\n    localizacao : "2dsphere"\n})\n'))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Agregar o conjunto de dados"),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"$geoNear"),": indica que queremos uma busca por proximidade"),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"near"),": indica que queremos aquilo que esteja pr\xf3ximo a uma coordenada espec\xedfica"),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"spherical : true"),": para calcular a dist\xe2ncia considerar esfera"),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"distanceField: distancia_calculada"),": isso mostra onde guardar a informa\xe7\xe3o da dist\xe2ncia calculada nos documentos"),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"num"),": refere-se aos resultados a serem exibidos")),Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",{parentName:"pre",className:"language-bash"},'db.alunos.aggregate([\n{\n    $geoNear : {\n        near : {\n            coordinates: [-23.5640265, -46.6527128],\n            type : "Point"\n        },\n        distanceField : "distancia.calculada",\n        spherical : true,\n        num : 4\n    }\n}\n])\n'))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("a",{parentName:"p",href:"https://docs.mongodb.com/manual/reference/operator/query-geospatial/"},"https://docs.mongodb.com/manual/reference/operator/query-geospatial/"))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("a",{parentName:"p",href:"https://www.alura.com.br/curso-online-mongodb"},"https://www.alura.com.br/curso-online-mongodb")))))}b.isMDXComponent=!0}}]);